# Chart Preview - Local Release Build Guide

This guide explains how to build Chart Preview releases locally using your macOS and Windows machines.

## Overview

- **macOS Machine**: Builds macOS (VST3 + AU) and Linux (VST3) plugins
- **Windows Machine**: Builds Windows (VST3) plugin  
- **Final Step**: Combines all builds into a complete release package

## Prerequisites

### macOS Machine
- Xcode with command line tools
- JUCE 8.0.0 installed at `/Applications/JUCE/`
- Cross-compilation tools for Linux (should work with standard Xcode)

### Windows Machine  
- Visual Studio 2022 (Community, Professional, or Enterprise)
- JUCE project files (generated by Projucer)

## Build Process

### Step 1: Build on macOS

Run this command on your macOS machine:

```bash
./build-release-macos.sh [version]
```

Example:
```bash
./build-release-macos.sh 1.2.0
```

This creates:
- `../releases/ChartPreview-v1.2.0-macOS.zip` (VST3 + AU)
- `../releases/ChartPreview-v1.2.0-Linux.zip` (VST3)

### Step 2: Build on Windows

1. Copy the `build-release-windows.bat` file to your Windows machine
2. Run this command in Command Prompt:

```cmd
build-release-windows.bat [version]
```

Example:
```cmd
build-release-windows.bat 1.2.0
```

This creates:
- `../releases/ChartPreview-v1.2.0-Windows.zip` (VST3)

### Step 3: Combine Releases (macOS)

After copying the Windows build back to your macOS machine:

```bash
./create-full-release.sh [version]
```

Example:
```bash
./create-full-release.sh 1.2.0
```

This creates:
- `../releases/ChartPreview-v1.2.0-Complete.zip` (All platforms)

## File Structure

```
releases/
├── ChartPreview-v1.2.0-macOS.zip      # macOS VST3 + AU
├── ChartPreview-v1.2.0-Linux.zip      # Linux VST3  
├── ChartPreview-v1.2.0-Windows.zip    # Windows VST3
├── ChartPreview-v1.2.0-Complete.zip   # All platforms
└── ChartPreview-v1.2.0-Complete/      # Unzipped complete bundle
    ├── ChartPreview-v1.2.0-macOS.zip
    ├── ChartPreview-v1.2.0-Linux.zip
    ├── ChartPreview-v1.2.0-Windows.zip
    ├── README.txt
    └── VERSION.txt
```

## Bundle Contents

Each platform bundle includes:
- Plugin files (VST3/AU)
- Automatic installer script
- README with installation instructions
- Platform-specific documentation

## Troubleshooting

### macOS Build Issues
- Ensure JUCE is installed at `/Applications/JUCE/`
- Check Xcode command line tools: `xcode-select --install`
- Verify Projucer path in the script

### Windows Build Issues  
- Ensure Visual Studio 2022 is installed
- Check MSBuild path in the script
- Make sure to build for x64 platform
- Run Command Prompt as Administrator if needed

### Linux Cross-Compilation Issues
- Linux builds on macOS use the LinuxMakefile target
- Ensure all JUCE dependencies are available
- May require additional system libraries

## Quick Commands

```bash
# Build everything (run on macOS after Windows build is copied)
./build-release-macos.sh 1.2.0
# (copy Windows build)
./create-full-release.sh 1.2.0

# Development build (version defaults to "dev")
./build-release-macos.sh
```

## Notes

- Version defaults to "dev" if not specified
- Scripts create organized ZIP archives with installers
- All builds use Release configuration for optimization
- Cross-platform bundle includes installation scripts for each OS